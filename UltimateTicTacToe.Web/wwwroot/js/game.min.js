$(document).ready(function(){var n,t;if($("#playerName").val()===""||$("#playerName").val()==undefined){n=$(".modal").modal();$("#newModalForm").validate({rules:{name:{required:!0,minlength:3},action:"required"},messages:{name:{required:"Please enter a name",minlength:"Your name must be at least 3 characters"},action:"Please provide some data"}});n.on("shown.bs.modal",function(){$("#name").focus()});$("#playerName").keypress(function(n){n.keyCode==13&&$("#btnSave").click()})}else{t=$("#playerName").val();n("/gamehub",function(n){n.on("broadcastMessage",function(n,t){$("#moveHistory").append(n+": "+t)});n.on("consoleLog",function(t,i){var r,u;console.log(t);i!=undefined&&(r={Name:$("#playerName").val(),ConnectionId:i},$("#playerObjectString").val(JSON.stringify(r)),$("#gameObjectString").val()!=undefined&&$("#gameObjectString").val()!==""&&(u=$.parseJSON($("#gameObjectString").val()),n.invoke("AddPlayer",$("#playerObjectString").val(),JSON.stringify(u.GameId))))});n.on("newGameInit",function(){($("#gameObjectString").val()===""||$("#gameObjectString").val()==undefined)&&n.invoke("newgame",$("#playerObjectString").val())});n.on("newGameComplete",function(n,i){$("#inviteCode").html("Hi "+t+', you\'re flyin solo right now. Get yourself a wingman (or wingwoman) and send them this link to join up: <span id="gameURL">'+i+"/Game?id="+n+"<\/span>");$("#gameCode").html("Game code: "+n);$("#playerAlbl").html("Player One: "+$("#playerName").val())});n.on("playerTurn",function(n){var t=$.parseJSON($("#playerObjectString").val());$("#playerBlbl").html("Player Two: "+n.playerB.name);n.activePlayer===t.ConnectionId?TileSelect(n.moveHistory):DisableTiles()})}).then(function(n){$(".tile").on("click",function(){n.invoke("tileClicked",$("#playerName"))})}).catch(n=>{console.error(n.message)});function n(n,t){return function i(r){console.log(`Starting connection using ${signalR.TransportType[r]} transport`);var u=new signalR.HubConnection(n,{transport:r});return t&&typeof t=="function"&&t(u),u.start().then(function(){return u}).catch(function(n){return(console.log(`Cannot start the connection use ${signalR.TransportType[r]} transport. ${n.message}`),r!==signalR.TransportType.LongPolling)?i(r+1):Promise.reject(n)})}(signalR.TransportType.WebSockets)}}});var TileSelect=function(n){$("#inviteCode").html("Make your move!!");n!=null},DisableTiles=function(){$("#inviteCode").html("Wait your turn...");$(".tile-button").addClass("disabled").attr("disabled","disabled")};